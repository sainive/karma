webpackJsonp([1],{844:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(845),i=n(o);t["default"]={component:i["default"]}},845:function(e,t,r){"use strict";e.exports=r(846)},846:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){e.params,e.loadContext;return void t()}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(197),c=n(l),d=r(496),p=n(d),f=(r(574),r(847)),h=n(f),m=r(902),y=n(m),b="HomeRouting",v={location:l.PropTypes.object.isRequired,photoFeed:l.PropTypes.object.isRequired,homeFeed:l.PropTypes.object.isRequired,userPreferences:l.PropTypes.object.isRequired,auth:l.PropTypes.object,windowWidth:l.PropTypes.number,contentWidth:l.PropTypes.number,pixelRatio:l.PropTypes.number.isRequired,jsLoaded:l.PropTypes.bool.isRequired,actions:l.PropTypes.object.isRequired,api:l.PropTypes.object.isRequired,xp:l.PropTypes.object},g=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.xp,t=(0,p["default"])(e,"HOMEFEED_V1.variant");return c["default"].createElement("div",null,"home"===t?c["default"].createElement(h["default"],this.props):c["default"].createElement(y["default"],this.props))}}]),t}(l.Component);t["default"]=g,g.displayName=b,g.propTypes=v,g.loadProps=u},847:function(e,t,r){"use strict";e.exports=r(848)},848:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){e.params,e.loadContext;return void t()}function s(e){return function(t){return e.custom.listHomeFeedPhotos(t)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(197),d=n(c),p=r(540),f=n(p),h=r(574),m=r(547),y=n(m),b=r(849),v=n(b),g=r(876),P=n(g),_=r(879),w=n(_),E=r(893),T=n(E),j=r(898),k=n(j),O=r(784),x=r(901),N="Home",R={location:c.PropTypes.object.isRequired,userPreferences:c.PropTypes.object.isRequired,auth:c.PropTypes.object,windowWidth:c.PropTypes.number,contentWidth:c.PropTypes.number,pixelRatio:c.PropTypes.number.isRequired,jsLoaded:c.PropTypes.bool.isRequired,homeFeed:c.PropTypes.object.isRequired,actions:c.PropTypes.object.isRequired,api:c.PropTypes.object.isRequired},S=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.actions,r=e.api;r.custom.listHomeFeedPhotos().then(h.toJson).then(function(e){t.resetHomeFeed({photos:e.photos,nextPage:e.next_page})})}},{key:"render",value:function(){var e=this.props,t=e.homeFeed,r=e.location,n=e.userPreferences,o=e.auth,i=e.windowWidth,a=e.contentWidth,u=e.pixelRatio,l=e.jsLoaded,c=e.actions,p=e.api,h=0===t.photos.length&&!t.maxPage;return d["default"].createElement("div",null,d["default"].createElement(f["default"],{meta:(0,O.buildDynamicMetaTags)(t.photos,x.meta)}),d["default"].createElement(P["default"],{authUser:o.user,windowWidth:i}),d["default"].createElement(w["default"],{location:r,actions:c,photoFeed:t,preferredGrid:n.grid,showSorting:!1,isHomeXP:!0}),d["default"].createElement(v["default"],{showPlaceholder:h,photos:t.photos,perPage:t.perPage,nextPage:t.nextPage,handleFetch:s(p),authUser:o.user,location:r,preferredGrid:n.grid,windowWidth:i,contentWidth:a,pixelRatio:u,jsLoaded:l,actions:c,raven:y["default"],api:p}),d["default"].createElement(k["default"],null),d["default"].createElement(T["default"],null))}}]),t}(c.Component);t["default"]=S,S.displayName=N,S.propTypes=R,S.loadProps=u},849:function(e,t,r){"use strict";e.exports=r(850)},850:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.grid&&"multi"===e.grid?"multi":"single"}function s(e){var t=arguments.length<=1||void 0===arguments[1]?"single":arguments[1];return e&&e.grid?u(e):t}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(197),d=n(c),p=r(851),f=n(p),h=r(626);r(640),r(792),r(852),r(854),r(856),r(800),r(802);var m=r(574),y=r(858),b=r(592),v=r(859),g=n(v),P=r(865),_=n(P),w=r(873),E=n(w),T="HomeFeed",j={photos:c.PropTypes.array,handleFetch:c.PropTypes.func,perPage:c.PropTypes.number,nextPage:c.PropTypes.string,endContent:c.PropTypes.element,location:c.PropTypes.object.isRequired,username:c.PropTypes.string,user:c.PropTypes.object,preferredGrid:c.PropTypes.string,authUser:c.PropTypes.object,jsLoaded:c.PropTypes.bool.isRequired,windowWidth:c.PropTypes.number,pixelRatio:c.PropTypes.number.isRequired,contentWidth:c.PropTypes.number,actions:c.PropTypes.object.isRequired,raven:c.PropTypes.object.isRequired,api:c.PropTypes.object.isRequired},k={photos:[],handleFetch:null,username:null,preferredGrid:"single",contentWidth:1176},O=function(e){function t(e){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e)),n=e.location,a=e.preferredGrid;return r.state={renderPlaceholder:!1,grid:s(n.query,a)},r}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,r=e.preferredGrid,n=e.actions;t.query.grid&&t.query.grid!==r&&n.setPreferredGrid(t.query.grid),this.addScrollSubscription()}},{key:"componentWillUpdate",value:function(e){var t=this,r=e.preferredGrid!==this.props.preferredGrid,n=e.handleFetch,o=e.perPage,i=e.nextPage,a=e.actions;r&&(this.removeScrollSubscription(),n(i).then(m.toJson).then(function(e){t.addScrollSubscription(),a.resetHomeFeed({photos:e.photos,nextPage:e.next_page,perPage:o})}))}},{key:"componentWillUnmount",value:function(){this.removeScrollSubscription()}},{key:"addScrollSubscription",value:function(){var e=this,t=h.Observable.fromEvent(window,"scroll").filter(function(){return(0,b.shouldFetchMoreContent)()}).map(function(){return e.props.nextPage}).distinct();this.scrollSubscription=t.subscribe(this.fetchPhotos.bind(this))}},{key:"removeScrollSubscription",value:function(){this.scrollSubscription.unsubscribe(),this.fetchSubscription&&this.fetchSubscription.unsubscribe()}},{key:"fetchPhotos",value:function(){var e=this,t=this.props,r=t.handleFetch,n=t.raven,o=t.nextPage,i=t.actions;if(r&&o){var a=h.Observable.defer(function(){return r(o).then(m.toJson)}).retry(3).take(1);this.fetchSubscription=a.subscribe(function(t){e.trackPageView(),i.addPhotosToHomeFeed(t.photos),i.updateHomeFeed({nextPage:t.next_page})},function(e){n.captureException(e,{tags:{component:"HomeFeed"}})})}}},{key:"trackPageView",value:function(){var e=this.props.location;window.ga("send","pageview",e.pathname)}},{key:"handleToggleClick",value:function(e){var t=this.props,r=t.preferredGrid,n=t.actions,o=t.perPage;r!==e&&(f["default"].set(y.GRID,e),n.setPreferredGrid(e),n.resetHomeFeed({perPage:o}),n.trackGridSwitch(e))}},{key:"renderGrid",value:function(){var e=this.props,t=e.windowWidth,r=e.preferredGrid,n="multi"===r&&!(0,b.isPhone)(t);return n?this.renderMultiGrid():this.renderSingleGrid()}},{key:"renderMultiGrid",value:function(){var e=this.props,t=e.location,r=e.photos,n=e.authUser,o=e.windowWidth,i=e.pixelRatio,a=e.jsLoaded,u=e.actions,s=e.api;return d["default"].createElement(g["default"],{photos:r,location:t,authUser:n,windowWidth:o,pixelRatio:i,jsLoaded:a,actions:u,api:s})}},{key:"renderSingleGrid",value:function(){var e=this.props,t=e.location,r=e.photos,n=e.authUser,o=e.windowWidth,i=e.contentWidth,a=e.pixelRatio,u=e.actions,s=e.api;return d["default"].createElement(_["default"],{photos:r,location:t,authUser:n,windowWidth:o,contentWidth:i,pixelRatio:a,actions:u,api:s})}},{key:"renderSpinner",value:function(){var e=this.props.nextPage;return e?d["default"].createElement(E["default"],null):void 0}},{key:"renderEndContent",value:function(){var e=this.props,t=e.endContent,r=e.nextPage;return r?void 0:t}},{key:"render",value:function(){return d["default"].createElement("div",null,d["default"].createElement("div",{ref:"Container",className:"container"},this.renderGrid(),this.renderSpinner(),this.renderEndContent()))}}]),t}(c.Component);t["default"]=O,O.displayName=T,O.propTypes=j,O.defaultProps=k,O.contextTypes={router:d["default"].PropTypes.object.isRequired}},851:function(e,t){var t=e.exports=function(e){e||(e={}),"string"==typeof e&&(e={cookie:e}),void 0===e.cookie&&(e.cookie="");var t={};return t.get=function(t){for(var r=e.cookie.split(/;\s*/),n=0;n<r.length;n++){var o=r[n].split("="),i=unescape(o[0]);if(i===t)return unescape(o[1])}},t.set=function(t,r,n){n||(n={});var o=escape(t)+"="+escape(r);return n.expires&&(o+="; expires="+n.expires),n.path&&(o+="; path="+escape(n.path)),e.cookie=o,o},t};if("undefined"!=typeof document){var r=t(document);t.get=r.get,t.set=r.set}},852:function(e,t,r){"use strict";var n=r(626),o=r(853);n.Observable.prototype.filter=o.filter},853:function(e,t,r){"use strict";function n(e,t){return this.lift(new a(e,t))}var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(630);t.filter=n;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate,this.thisArg))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return o(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},t}(i.Subscriber)},854:function(e,t,r){"use strict";var n=r(626),o=r(855);n.Observable.prototype.map=o.map},855:function(e,t,r){"use strict";function n(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(630);t.map=n;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.project,this.thisArg))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return o(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(i.Subscriber)},856:function(e,t,r){"use strict";var n=r(626),o=r(857);n.Observable.prototype.distinct=o.distinct},857:function(e,t,r){"use strict";function n(e,t){return this.lift(new u(e,t))}var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(799),a=r(795);t.distinct=n;var u=function(){function e(e,t){this.compare=e,this.flushes=t}return e.prototype.call=function(e,t){return t._subscribe(new s(e,this.compare,this.flushes))},e}(),s=function(e){function t(t,r,n){e.call(this,t),this.values=[],"function"==typeof r&&(this.compare=r),n&&this.add(a.subscribeToResult(this,n))}return o(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.values.length=0},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){var t=!1,r=this.values,n=r.length;try{for(var o=0;n>o;o++)if(this.compare(r[o],e))return void(t=!0)}catch(i){return void this.destination.error(i)}this.values.push(e),this.destination.next(e)},t.prototype.compare=function(e,t){return e===t},t}(i.OuterSubscriber);t.DistinctSubscriber=s},858:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UNSPLASH_SESSION="_un_sesh",t.LOGGED_IN="logged_in",t.REMEMBER_USER_TOKEN="remember_user_token",t.LAST_SEEN_NEW_PHOTO="lsnp",t.GRID="grd",t.UNIQUE_USER_IDENTIFIER="i"},859:function(e,t,r){"use strict";e.exports=r(860)},860:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return{totalHeight:e,photos:t}}function l(e){var t=0,r=e[0];return e.forEach(function(e,n){e.totalHeight<r.totalHeight&&(t=n,r=e)}),t}function c(e){return Array.from({length:e}).map(function(){return s()})}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(197),f=n(p),h=r(599),m=n(h),y=r(861),b=n(y),v=r(594),g=r(786),P=r(864),_=n(P),w="Masonry",E={photos:p.PropTypes.array.isRequired,authUser:p.PropTypes.object,windowWidth:p.PropTypes.number,pixelRatio:p.PropTypes.number.isRequired,location:p.PropTypes.object.isRequired,jsLoaded:p.PropTypes.bool.isRequired,actions:p.PropTypes.object.isRequired,api:p.PropTypes.object.isRequired},T={},j=function(e){function t(e){i(this,t);var r=a(this,Object.getPrototypeOf(t).call(this,e));return r.state={gridCount:e.windowWidth<=v.SMALL_MAX?2:3},r}return u(t,e),d(t,[{key:"componentWillUpdate",value:function(e){var t=this.props.windowWidth;e.windowWidth!==t&&(e.windowWidth<=v.SMALL_MAX?this.setState({gridCount:2}):this.setState({gridCount:3}))}},{key:"getGridData",value:function(e){var t=this.props.photos,r=c(e);t.forEach(function(e){var t=r[l(r)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))});var n=r.map(function(e){return e.photos});return n}},{key:"renderPhoto",value:function(e,t){var r=this.state.gridCount,n=this.props,o=n.location,i=n.authUser,a=n.jsLoaded,u=n.pixelRatio,s=n.actions,l=n.api,c=3===r?376:481,d=(0,g.getImageSizeFromParent)(e,this.refs.MasonryGrid0&&this.refs.MasonryGrid0.offsetWidth||c);return f["default"].createElement(b["default"],{key:t,photo:e,width:d.width,height:d.height,location:o,authUser:i,pixelRatio:u,actions:s,saveNodes:a,api:l})}},{key:"renderGrid",value:function(e,t){var r,n=this.state.gridCount;return f["default"].createElement("div",{key:t,ref:"MasonryGrid"+t,className:(0,m["default"])(_["default"].Grid,(r={},o(r,_["default"].GridThree,3===n),o(r,_["default"].GridTwo,2===n),o(r,_["default"].GridOne,1===n),r))},e.map(this.renderPhoto.bind(this)))}},{key:"renderGrids",value:function(){var e=this,t=this.state.gridCount;return this.getGridData(t).map(function(t,r){return e.renderGrid(t,r)})}},{key:"render",value:function(){return f["default"].createElement("div",{id:"gridMulti",className:_["default"].container},this.renderGrids())}}]),t}(p.Component);t["default"]=j,j.displayName=w,j.propTypes=E,j.defaultProps=T},861:function(e,t,r){"use strict";e.exports=r(862)},862:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(197),c=n(l),d=r(615),p=n(d),f=r(599),h=n(f),m=r(592),y=r(786),b=r(787),v=n(b),g=r(790),P=n(g),_=r(807),w=n(_),E=r(810),T=n(E),j=r(863),k=n(j),O="PhotoMasonry",x={photo:l.PropTypes.object.isRequired,width:l.PropTypes.number,height:l.PropTypes.number,location:l.PropTypes.object.isRequired,authUser:l.PropTypes.object,pixelRatio:l.PropTypes.number.isRequired,saveNodes:l.PropTypes.bool,actions:l.PropTypes.object.isRequired,api:l.PropTypes.object.isRequired},N={width:null,height:null,saveNodes:!1},R=function(e){function t(e){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r.state={isHovering:!1},r}return a(t,e),s(t,[{key:"handleMouseMove",value:function(){this.setState({isHovering:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHovering:!1})}},{key:"renderPhotoInfo",value:function(){var e=this,t=this.props,r=t.photo,n=t.location,o=t.actions,i=n.pathname;return c["default"].createElement("div",{className:k["default"].photoInfo,onMouseMove:this.handleMouseMove.bind(this),onMouseLeave:this.handleMouseLeave.bind(this)},c["default"].createElement(p["default"],{to:{pathname:i,query:{photo:r.id}},className:k["default"].photoInfoLink,onClick:function(){return o.setSelectedPhoto(u({},r,{ref:e.refs[r.id]}))}}),this.renderActions())}},{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,r=e.photo,n=e.authUser,o=e.actions,i=e.api;return c["default"].createElement(P["default"],{type:"alt",location:t,photo:r,actions:o,authUser:n,api:i})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,r=e.photo,n=e.authUser,o=e.actions;return c["default"].createElement(T["default"],{className:k["default"].collectionButton,type:"alt",photo:r,actions:o,location:t,authUser:n})}},{key:"renderDownloadButton",value:function(){var e=this.props,t=e.photo,r=e.actions;return c["default"].createElement("div",{className:k["default"].buttonDownloadContainer},c["default"].createElement(w["default"],{type:"alt",photo:t,actions:r}))}},{key:"renderTopActions",value:function(){return c["default"].createElement("div",{className:k["default"].actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton())}},{key:"renderBottomActions",value:function(){var e=this.props,t=e.photo,r=e.actions;return c["default"].createElement("div",{className:k["default"].actionsBottom},c["default"].createElement("div",{className:k["default"].userContainer},c["default"].createElement(v["default"],{user:t.user,type:"alt",actions:r})),this.renderDownloadButton())}},{key:"renderActions",value:function(){var e=this.state.isHovering,t=this.props.saveNodes;return!e&&t?null:c["default"].createElement("div",{classNames:k["default"].actions},this.renderTopActions(),this.renderBottomActions())}},{key:"renderImage",value:function(){var e=this.props,t=e.photo,r=e.width,n=e.height,o=e.pixelRatio,i=e.location,a=(0,y.getRoundedImageWidth)(r,!0),u=(0,y.getImageHeightFromWidth)(a,r,n),s=(0,m.buildImgixUrl)({url:t.urls.raw,width:a,height:u,pixelRatio:o}),l=i.pathname;return c["default"].createElement(p["default"],{ref:t.id,to:{pathname:l,query:{photo:t.id}},title:"View the photo By "+t.user.name,className:(0,h["default"])(k["default"].photo),style:{backgroundImage:'url("'+s+'")',width:r,height:n}})}},{key:"render",value:function(){return c["default"].createElement("div",{className:k["default"].container},this.renderImage(),this.renderPhotoInfo())}}]),t}(l.Component);t["default"]=R,R.displayName=O,R.propTypes=x,R.defaultProps=N},863:function(e,t){e.exports={container:"_2qSR4",photo:"_3ENRV",image:"_37TRr",photoInfo:"_1DX6y",photoInfoLink:"CEfcQ",actionsTop:"_38rio",collectionButton:"rRTF1",actionsBottom:"EAPDC",userContainer:"_2Us-3 _3YIV2",buttonDownloadContainer:"_1gCa4 tPMQE"}},864:function(e,t){e.exports={container:"_3_WtK _1VOuf",Grid:"_1OvAL _3YIV2",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},865:function(e,t,r){"use strict";e.exports=r(866)},866:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(197),i=n(o),a=r(599),u=n(a),s=r(608),l=n(s),c=r(603),d=n(c),p=r(600),f=n(p),h=r(867),m=n(h),y=r(786),b=r(592),v=r(869),g=n(v),P=r(872),_=n(P),w=(0,l["default"])((0,d["default"])("PhotosListView"),(0,f["default"])({photos:o.PropTypes.array,authUser:o.PropTypes.object,windowWidth:o.PropTypes.number,pixelRatio:o.PropTypes.number,contentWidth:o.PropTypes.number,actions:o.PropTypes.object.isRequired,api:o.PropTypes.object.isRequired}));t["default"]=w((0,m["default"])(function(e){var t=e.location,r=e.photos,n=e.authUser,o=e.contentWidth,a=e.windowWidth,s=e.pixelRatio,l=e.actions,c=e.api;return i["default"].createElement("div",{ref:"SingleGrid",id:"gridSingle",className:(0,u["default"])(_["default"].container)},r.map(function(e){var r=(0,y.getImageSizeFromParent)(e,(0,b.isPhone)(a)?a:o);return i["default"].createElement(g["default"],{key:e.id,photo:e,pixelRatio:s,width:r.width,height:r.height,location:t,authUser:n,actions:l,api:c})}))}))},867:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=r(197),s=n(u),l=r(868),c=n(l),d=r(607),p=n(d),f=function(e){if((0,p["default"])(e))return e;var t=function(t){function r(){return o(this,r),i(this,t.apply(this,arguments))}return a(r,t),r.prototype.render=function(){return"string"==typeof e?s["default"].createElement("baseComponent",this.props):e(this.props,this.context)},r}(u.Component);return t.displayName=(0,c["default"])(e),t.propTypes=e.propTypes,t.contextTypes=e.contextTypes,t.defaultProps=e.defaultProps,t};t["default"]=f},868:function(e,t){"use strict";t.__esModule=!0;var r=function(e){if("string"==typeof e)return e;if(e)return e.displayName||e.name||"Component"};t["default"]=r},869:function(e,t,r){"use strict";e.exports=r(870)},870:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(197),c=n(l),d=r(599),p=n(d),f=r(615),h=n(f),m=r(592),y=r(786),b=r(787),v=n(b),g=r(790),P=n(g),_=r(810),w=n(_),E=r(807),T=n(E),j=r(871),k=n(j),O="Photo",x={photo:l.PropTypes.object.isRequired,width:l.PropTypes.number,height:l.PropTypes.number,pixelRatio:l.PropTypes.number.isRequired,location:l.PropTypes.object.isRequired,actions:l.PropTypes.object.isRequired,authUser:l.PropTypes.object,api:l.PropTypes.object.isRequired},N={width:null,height:null},R=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"renderImage",value:function(){var e=this,t=this.props,r=t.photo,n=t.width,o=t.height,i=t.pixelRatio,a=t.location,s=t.actions,l=(0,y.getRoundedImageWidth)(n),d=(0,y.getImageHeightFromWidth)(l,r.width,r.height),f=(0,m.buildImgixUrl)({url:r.urls.raw,width:l,height:d,pixelRatio:i});return c["default"].createElement(h["default"],{ref:r.id,href:(0,m.nodeUrl)()+"/photos/"+r.id,to:{pathname:a.pathname,query:{photo:r.id}},title:"View the photo By "+r.user.name,className:(0,p["default"])(k["default"].photo),style:{backgroundImage:'url("'+f+'")',width:n,height:o},onClick:function(){return s.setSelectedPhoto(u({},r,{ref:e.refs[r.id]}))}})}},{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,r=e.photo,n=e.actions,o=e.authUser,i=e.api;return c["default"].createElement(P["default"],{photo:r,location:t,actions:n,authUser:o,api:i})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,r=e.photo,n=e.actions,o=e.authUser;return c["default"].createElement(w["default"],{className:k["default"].collectionButton,photo:r,location:t,actions:n,authUser:o})}},{key:"renderleftActions",value:function(){return c["default"].createElement("div",{className:k["default"].leftActions},this.renderLikeButton(),this.renderAddToCollectionButton())}},{key:"renderRightActions",value:function(){var e=this.props,t=e.photo,r=e.actions;return c["default"].createElement("div",{className:k["default"].rightActions},c["default"].createElement(T["default"],{photo:t,actions:r,showLabel:!0}))}},{key:"renderUser",value:function(){var e=this.props,t=e.photo,r=e.actions;return c["default"].createElement("div",{className:k["default"].user},c["default"].createElement(v["default"],{user:t.user,actions:r}))}},{key:"renderPhotoInfo",value:function(){return c["default"].createElement("div",{className:k["default"].photoInfo},this.renderleftActions(),this.renderUser(),this.renderRightActions())}},{key:"renderUserLink",value:function(){var e=this.props.photo,t=e.user,r=(0,m.nodeUrl)()+"/"+t.username;return c["default"].createElement("div",{className:k["default"].userLink},c["default"].createElement("a",{href:r,className:k["default"].userImageContainer},c["default"].createElement("img",{src:t.profile_image.small,className:k["default"].userAvatar})),c["default"].createElement("a",{href:r,className:k["default"].userName},t.name))}},{key:"render",value:function(){var e=this.props.photo;return c["default"].createElement("div",{className:k["default"].container},c["default"].createElement("div",{className:k["default"].userTopLink},c["default"].createElement(v["default"],{user:e.user})),this.renderImage(),this.renderPhotoInfo())}}]),t}(l.Component);t["default"]=R,R.displayName=O,R.propTypes=x,R.defaultProps=N},871:function(e,t){e.exports={container:"y5w1y",photo:"cV68d",image:"_1zvDn",photoInfo:"hduMF",leftActions:"_31wG7 _3YIV2",rightActions:"_287Ma tPMQE",user:"_114MZ",collectionButton:"_34QX5",userLink:"_3isoq",userImageContainer:"_8p1N4 _3YIV2",userAvatar:"_1fYZF",userName:"_1imKo _3YIV2",userTopLink:"_1f9xN"}},872:function(e,t){e.exports={container:"_1I8cs"}},873:function(e,t,r){"use strict";e.exports=r(874)},874:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){return a["default"].createElement("div",{id:"spinner",className:s["default"].spinnerContainer},a["default"].createElement("div",{className:s["default"].spinner}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=r(197),a=n(i),u=r(875),s=n(u)},875:function(e,t){e.exports={spinnerContainer:"_72qNE",spinner:"_1d72G",standard:"_10oQR"}},876:function(e,t,r){"use strict";e.exports=r(877)},877:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){return d["default"].createElement("h2",{className:w["default"].header},"Free ",d["default"].createElement("a",{href:(0,v.railsUrl)()+"/license"},"(do whatever you want)")," high-resolution photos.")}function i(){return d["default"].createElement("div",null,d["default"].createElement("h3",{className:w["default"].subheader},"A project by ",d["default"].createElement("a",{href:(0,v.trackUrl)("https://crew.co/"),target:"_blank",title:"Find a quality freelance designer or developer at Crew"},"Crew"),"."))}function a(e){switch(e){case"facebook":return{label:"Facebook",url:"https://www.facebook.com/pages/Unsplash/274126369394815",icon:"facebook"};case"twitter":return{label:"Twitter",url:"https://twitter.com/unsplash",icon:"twitter"};case"pinterest":return{label:"Pinterest",url:"https://pinterest.com/unsplash",icon:"pinterest"};case"medium":return{label:"Medium",url:"https://medium.com/unsplash-unfiltered",icon:"medium"};case"instagram":return{label:"Instagram",url:"https://instagram.com/unsplash",icon:"instagram"};default:return{}}}function u(e){var t=a(e),r=(0,v.trackUrl)(t.url);return d["default"].createElement("li",{className:w["default"].socialLink
},d["default"].createElement("a",{title:"Follow Unsplash on "+t.label,target:"_blank",href:r},d["default"].createElement(P["default"],{className:w["default"].socialIcon,type:t.icon,width:24,height:24}),d["default"].createElement("span",{className:w["default"].socialText},"Unsplash ",t.label)))}function s(){return d["default"].createElement("div",{className:w["default"].socialLinksContainer},d["default"].createElement("ul",null,u("twitter"),u("facebook"),u("pinterest"),u("medium"),u("instagram")))}function l(e,t){return e&&!(0,v.isPhone)(t)?null:d["default"].createElement("a",{className:w["default"].submitPhotoLink,href:(0,v.railsUrl)()+"/submit"},"Submit a photo")}Object.defineProperty(t,"__esModule",{value:!0});var c=r(197),d=n(c),p=r(600),f=n(p),h=r(603),m=n(h),y=r(608),b=n(y),v=r(592),g=r(609),P=n(g),_=r(878),w=n(_),E=(0,b["default"])((0,m["default"])("FeedHeader"),(0,f["default"])({authUser:c.PropTypes.object,windowWidth:c.PropTypes.number}));t["default"]=E(function(e){var t=e.authUser,r=e.windowWidth;return d["default"].createElement("div",{className:w["default"].container},d["default"].createElement("h1",{className:w["default"].logoName},"Unsplash"),d["default"].createElement("div",{className:w["default"].text},o(),i(),s(),l(t,r)))})},878:function(e,t){e.exports={container:"_258j4",logoName:"_2rZyq _36jaJ rr6hy",header:"_2WeNi UDEGo",subheader:"_1jYgt UDEGo",crewCta:"_24_Fz UDEGo",socialLinksContainer:"_18nYH",socialLink:"_1VZDx",socialIcon:"IFjlP",socialText:"_3l3AC",submitPhotoLink:"_1P8E6"}},879:function(e,t,r){"use strict";e.exports=r(880)},880:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(197),i=n(o),a=r(608),u=n(a),s=r(603),l=n(s),c=r(600),d=n(c),p=r(604),f=n(p),h=r(881),m=n(h),y=r(884),b=n(y),v=r(887),g=n(v),P=(0,u["default"])((0,l["default"])("FeedNav"),(0,d["default"])({showSorting:o.PropTypes.bool,showGridChanger:o.PropTypes.bool,location:o.PropTypes.object.required,actions:o.PropTypes.object.required,photoFeed:o.PropTypes.object,preferredGrid:o.PropTypes.oneOf(["single","multi"]).isRequired,isHomeXP:o.PropTypes.bool}),(0,f["default"])({showSorting:!0,showGridChanger:!0,preferredGrid:"single",isHomeXP:!1}));t["default"]=P(function(e){var t=e.location,r=e.showGridChanger,n=e.showSorting,o=e.photoFeed,a=e.actions,u=e.preferredGrid,s=e.renderLeftSection,l=e.isHomeXP;return i["default"].createElement(m["default"],null,i["default"].createElement("div",null,s&&s(),r?i["default"].createElement(b["default"],{preferredGrid:u,photoFeed:o,location:t,actions:a,isHomeXP:l}):null,n?i["default"].createElement(g["default"],{location:t,photoFeed:o,actions:a}):null))})},881:function(e,t,r){"use strict";e.exports=r(882)},882:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.children;return a["default"].createElement("div",{className:s["default"].container},t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=r(197),a=n(i),u=r(883),s=n(u),l={children:i.PropTypes.element.isRequired};o.propTypes=l},883:function(e,t){e.exports={container:"yWc5T _3ofrt"}},884:function(e,t,r){"use strict";e.exports=r(885)},885:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r,n,o){var i=n.maxPage,a=n.orderBy,u=n.perPage;return t===e?null:function(){p["default"].set(_.GRID,e),r.setPreferredGrid(e),o?r.resetHomeFeed({perPage:u}):r.resetPhotoFeed({initialPage:1,maxPage:i,orderBy:a,perPage:u}),r.trackGridSwitch(e)}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=r(197),s=n(u),l=r(599),c=n(l),d=r(851),p=n(d),f=r(608),h=n(f),m=r(603),y=n(m),b=r(600),v=n(b),g=r(615),P=n(g),_=r(858),w=r(609),E=n(w),T=r(886),j=n(T),k=(0,h["default"])((0,y["default"])("GridChanger"),(0,v["default"])({location:u.PropTypes.object.required,actions:u.PropTypes.object.required,photoFeed:u.PropTypes.object,preferredGrid:u.PropTypes.oneOf(["single","multi"]).isRequired,isHomeXP:u.PropTypes.bool})),O=[{type:"single",icon:"grid-single"},{type:"multi",icon:"grid-multi"}];t["default"]=k(function(e){var t=e.preferredGrid,r=e.location,n=e.actions,u=e.photoFeed,l=e.isHomeXP;return s["default"].createElement("div",{className:j["default"].gridSelector},O.map(function(e){return s["default"].createElement(P["default"],{key:e.type,className:(0,c["default"])(j["default"].gridLink,o({},j["default"].activeGridLink,t===e.type)),to:{pathname:r.pathname,query:a({},r.query,{grid:e.type})},onClick:i(e.type,t,n,u,l)},s["default"].createElement(E["default"],{className:j["default"].gridIcon,type:e.icon}))}))})},886:function(e,t){e.exports={gridSelector:"_36C6d",gridLink:"_2tP-l _21rCr",activeGridLink:"xWf97",gridIcon:"_1Sa22"}},887:function(e,t,r){"use strict";e.exports=r(888)},888:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(197),i=n(o),a=r(608),u=n(a),s=r(603),l=n(s),c=r(600),d=n(c),p=r(615),f=n(p),h=r(592),m=r(620),y=n(m),b=r(889),v=n(b),g=r(892),P=n(g),_=[{type:"latest",label:"Latest"},{type:"popular",label:"Popular"},{type:"oldest",label:"Oldest"}],w=(0,u["default"])((0,l["default"])("SortingLinks"),(0,d["default"])({location:o.PropTypes.object.required,actions:o.PropTypes.object.required,photoFeed:o.PropTypes.object}));t["default"]=w(function(e){var t=e.location,r=e.photoFeed,n=e.actions;return i["default"].createElement("div",{className:P["default"].sortingLinkContainer},i["default"].createElement(f["default"],{className:P["default"].sortingLink,to:{pathname:t.pathname,query:(0,h.toggleIsVisibleQuery)(t,"sorting_popover")}},_.find(function(e){return e.type===r.orderBy}).label," ▾"),i["default"].createElement(y["default"],{className:P["default"].popoverLocation,location:t,activeQuery:"sorting_popover",arrowLocation:"top-right"},i["default"].createElement("ul",{className:P["default"].ul},_.map(function(e){return i["default"].createElement(v["default"],{key:e.type,type:e.type,label:e.label,location:t,actions:n,photoFeed:r})}))))})},889:function(e,t,r){"use strict";e.exports=r(890)},890:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){var n=r.maxPage,o=r.perPage,i=r.orderBy;return i===e?null:function(){t.resetPhotoFeed({orderBy:e,initialPage:1,maxPage:n,perPage:o}),t.trackSortingChange(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(197),u=n(a),s=r(608),l=n(s),c=r(603),d=n(c),p=r(600),f=n(p),h=r(615),m=n(h),y=r(592),b=r(891),v=n(b),g=(0,l["default"])((0,d["default"])("SortingLink"),(0,f["default"])({location:a.PropTypes.object.required,actions:a.PropTypes.object.required,photoFeed:a.PropTypes.object,type:a.PropTypes.string.required,label:a.PropTypes.string.required}));t["default"]=g(function(e){var t=e.type,r=e.label,n=e.location,a=e.actions,s=e.photoFeed;return u["default"].createElement("li",null,u["default"].createElement(m["default"],{className:v["default"].sortingLink,to:{pathname:n.pathname,query:i({},(0,y.toggleIsVisibleQuery)(n,"sorting_popover"),{sort_by:t})},onClick:o(t,a,s)},r))})},891:function(e,t){e.exports={sortingLink:"_3jiZO _1zOQ1 _36jaJ UDEGo _21rCr"}},892:function(e,t){e.exports={ul:"_2kRzn",li:"_2zVvH",link:"link",sortingLinkContainer:"_3BHLS",sortingLink:"rejdY tPMQE _21rCr",popoverLocation:"klA9u"}},893:function(e,t,r){"use strict";e.exports=r(894)},894:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(197),u=n(a),s=r(599),l=n(s),c=r(831),d=n(c),p=r(600),f=n(p),h=r(603),m=n(h),y=r(604),b=n(y),v=r(829),g=n(v),P=r(830),_=n(P),w=r(608),E=n(w),T=r(574),j=n(T),k=r(895),O=r(896),x=r(897),N=n(x),R={title:null,message:null,link_text:null,link:null,image:null},S=(0,E["default"])((0,m["default"])("Announcement"),(0,f["default"])({announcement:a.PropTypes.object,isVisible:a.PropTypes.bool}),(0,b["default"])({announcement:R,isVisible:!1}),(0,g["default"])("isVisible","toggleVisibility",!1),(0,g["default"])("announcement","setAnnouncement",R),(0,_["default"])({clickHandler:function(e){return function(){e.toggleVisibility(!1)}}}),(0,d["default"])({componentDidMount:function(){var e=(0,O.isLessThan2Days)(window.localStorage.getItem(k.ANNOUNCEMENT_LAST_SEEN_DATE),(new Date).getTime());if(!e){var t=this.props,r=t.setAnnouncement,n=t.toggleVisibility;j["default"].custom.getAnnouncements().then(T.toJson).then(function(e){var t=window.localStorage.getItem(k.SEEN_ANNOUNCEMENTS_IDS)||"",o=(0,O.getSeenAnnouncementsIds)(t),a=(0,O.getUnseenAnnouncement)(e,o);if(a){var u=[a.id].concat(i(o));window.localStorage.setItem(k.SEEN_ANNOUNCEMENTS_IDS,u),window.localStorage.setItem(k.ANNOUNCEMENT_LAST_SEEN_DATE,(new Date).getTime()),r(a),n(!0),j["default"].custom.readAnnouncement(a.id)}})}}}));t["default"]=S(function(e){var t=e.announcement,r=e.isVisible,n=e.clickHandler;return u["default"].createElement("div",{className:(0,l["default"])(N["default"].announcementContainer,o({},N["default"].isVisible,r)),id:"qa-announcement"},u["default"].createElement("div",{className:N["default"].announcement},u["default"].createElement("div",{className:N["default"].imageContainer},u["default"].createElement("a",{href:t.link,onClick:n,target:"_blank",title:t.link_text},u["default"].createElement("img",{className:N["default"].image,src:t.image}))),u["default"].createElement("div",{className:N["default"].info},u["default"].createElement("h4",{className:N["default"].title},t.title),u["default"].createElement("p",{className:N["default"].message},t.message),u["default"].createElement("div",{className:N["default"].actions},u["default"].createElement("a",{className:N["default"].link,href:t.link,onClick:n,target:"_blank"},t.link_text),u["default"].createElement("button",{className:N["default"].dismiss,onClick:n,id:"qa-announcement-dismiss"},"Dismiss")))))})},895:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ANNOUNCEMENT_LAST_SEEN_DATE="unsplash:announcement:last-seen:date",t.SEEN_ANNOUNCEMENTS_IDS="unsplash:announcement:seen-announcements-ids"},896:function(e,t){"use strict";function r(e,t){var r=1728e5;return e?r>t-e:!1}function n(e){return e.length>0?e.split(","):[]}function o(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:0}function i(e,t){var r=e.filter(function(e){return t.indexOf(e.id.toString())<0}).sort(o);return r[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.isLessThan2Days=r,t.getSeenAnnouncementsIds=n,t.getUnseenAnnouncement=i},897:function(e,t){e.exports={announcementContainer:"_3g_WS _3aFCf",isVisible:"_2vACH",announcement:"_3sVw3 _1VOuf",imageContainer:"_1EdAe _3YIV2",image:"_8ZJkb",info:"I0D3r _3YIV2",title:"_1mft8",message:"JPo_g",actions:"Uj721",link:"_2n15o",dismiss:"_3rgaJ _1_rhW"}},898:function(e,t,r){"use strict";e.exports=r(899)},899:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){return a["default"].createElement("div",{className:c["default"].container},a["default"].createElement("a",{href:"/"},a["default"].createElement(s["default"],{type:"logo",className:c["default"].logo})),a["default"].createElement("p",{className:c["default"].text},"Make something awesome"))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=r(197),a=n(i),u=r(609),s=n(u),l=r(900),c=n(l)},900:function(e,t){e.exports={container:"_2WMKE",logo:"_1Ig-9",text:"_1cQDt"}},901:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.meta=[{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@unsplash"},{name:"twitter:title",content:"Unsplash | Free High Resolution Photos"},{name:"twitter:description",content:"Do-whatever-you-want high-resolution photos."},{name:"og:title",content:"Unsplash | Free High Resolution Photos"},{name:"og:description",content:"Do-whatever-you-want high-resolution photos."},{name:"og:url",content:"https://unsplash.com/"},{name:"og:type",content:"website"},{rel:"canonical",href:"https://unsplash.com/"},{name:"robots",content:"noindex, nofollow"}]},902:function(e,t,r){"use strict";e.exports=r(903)},903:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){e.params,e.loadContext;return void t()}function s(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],r=arguments.length<=1||void 0===arguments[1]?9:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"latest":arguments[2];return e.photos.listCuratedPhotos(t,r,n)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(197),d=n(c),p=r(540),f=n(p),h=r(496),m=(n(h),r(574)),y=r(547),b=n(y),v=r(904),g=n(v),P=r(876),_=n(P),w=r(879),E=n(w),T=r(893),j=n(T),k=r(898),O=n(k),x=r(909),N=r(784),R="Featured",S={location:c.PropTypes.object.isRequired,userPreferences:c.PropTypes.object.isRequired,auth:c.PropTypes.object,windowWidth:c.PropTypes.number,contentWidth:c.PropTypes.number,pixelRatio:c.PropTypes.number.isRequired,jsLoaded:c.PropTypes.bool.isRequired,photoFeed:c.PropTypes.object.isRequired,actions:c.PropTypes.object.isRequired,api:c.PropTypes.object.isRequired},C=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.actions,r=e.photoFeed,n=e.api,o=void 0;n.photos.listCuratedPhotos(1,24,r.orderBy).then(function(e){return o=Math.round(e.headers.get("x-total")/12),e}).then(m.toJson).then(function(e){t.resetPhotoFeed({maxPage:o,photos:e,orderBy:r.orderBy,lastPageFetched:2,perPage:12})})}},{key:"componentWillUnmount",value:function(){var e=this.props.actions;e.resetPhotoFeed()}},{key:"render",value:function(){var e=this.props,t=e.photoFeed,r=e.location,n=e.userPreferences,o=e.auth,i=e.windowWidth,a=e.contentWidth,u=e.pixelRatio,l=e.jsLoaded,c=e.actions,p=e.api,h=0===t.photos.length&&!t.maxPage;return d["default"].createElement("div",null,d["default"].createElement(f["default"],{meta:(0,N.buildDynamicMetaTags)(t.photos,x.meta)}),d["default"].createElement(_["default"],{authUser:o.user,windowWidth:i}),d["default"].createElement(E["default"],{location:r,orderBy:t.orderBy,actions:c,photoFeed:t,preferredGrid:n.grid}),d["default"].createElement(g["default"],{showPlaceholder:h,initialPage:t.initialPage,photos:t.photos,lastPageFetched:t.lastPageFetched,maxPage:t.maxPage,orderBy:t.orderBy,perPage:t.perPage,handleFetch:s(p),authUser:o.user,location:r,preferredGrid:n.grid,windowWidth:i,contentWidth:a,pixelRatio:u,jsLoaded:l,actions:c,raven:b["default"],api:p}),d["default"].createElement(O["default"],null),d["default"].createElement(j["default"],null))}}]),t}(c.Component);t["default"]=C,C.displayName=R,C.propTypes=S,C.loadProps=u},904:function(e,t,r){"use strict";e.exports=r(905)},905:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.grid&&"multi"===e.grid?"multi":"single"}function s(e){var t=arguments.length<=1||void 0===arguments[1]?"single":arguments[1];return e&&e.grid?u(e):t}function l(e){switch(e.sort_by){case"popular":return"popular";case"oldest":return"oldest";default:return"latest"}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(197),p=n(d),f=r(626);r(640),r(792),r(852),r(854),r(856),r(800),r(802);var h=r(574),m=r(592),y=r(859),b=n(y),v=r(865),g=n(v),P=r(873),_=n(P),w=r(906),E=n(w),T="Feed",j={showPlaceholder:d.PropTypes.bool,photos:d.PropTypes.array,handleFetch:d.PropTypes.func,lastPageFetched:d.PropTypes.number,perPage:d.PropTypes.number,orderBy:d.PropTypes.oneOf(["latest","popular","oldest"]),endContent:d.PropTypes.element,location:d.PropTypes.object.isRequired,username:d.PropTypes.string,user:d.PropTypes.object,initialPage:d.PropTypes.number,maxPage:d.PropTypes.number.isRequired,preferredGrid:d.PropTypes.string,authUser:d.PropTypes.object,jsLoaded:d.PropTypes.bool.isRequired,windowWidth:d.PropTypes.number,pixelRatio:d.PropTypes.number.isRequired,contentWidth:d.PropTypes.number,actions:d.PropTypes.object.isRequired,raven:d.PropTypes.object.isRequired,api:d.PropTypes.object.isRequired},k={photos:[],handleFetch:null,username:null,intialPage:1,lastPageFetched:1,perPage:10,preferredGrid:"single",contentWidth:1176,showPlaceholder:!1},O=function(e){function t(e){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e)),n=e.location,a=e.preferredGrid;return r.state={renderPlaceholder:!1,grid:s(n.query,a),sortBy:l(n.query)},r}return a(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,r=e.preferredGrid,n=e.actions;t.query.grid&&t.query.grid!==r&&n.setPreferredGrid(t.query.grid),this.context.setContentWidth(),this.addScrollSubscription()}},{key:"componentWillUpdate",value:function(e){var t=this,r=e.preferredGrid!==this.props.preferredGrid,n=e.orderBy!==this.props.orderBy,o=e.handleFetch,i=e.perPage,a=e.initialPage,u=e.orderBy,s=e.actions;(r||n)&&(this.removeScrollSubscription(),o(a,i,u).then(h.toJson).then(function(e){t.addScrollSubscription(),s.addPhotosToPhotoFeed(e)}))}},{key:"componentWillUnmount",value:function(){this.removeScrollSubscription()}},{key:"addScrollSubscription",value:function(){var e=this,t=f.Observable.fromEvent(window,"scroll").filter(function(){return(0,m.shouldFetchMoreContent)()}).map(function(){return e.props.lastPageFetched}).distinct();this.scrollSubscription=t.subscribe(this.fetchPhotos.bind(this))}},{key:"removeScrollSubscription",value:function(){this.scrollSubscription.unsubscribe(),this.fetchSubscription&&this.fetchSubscription.unsubscribe()}},{key:"fetchPhotos",value:function(){var e=this,t=this.props,r=t.handleFetch,n=t.maxPage,o=t.raven,i=t.actions,a=t.lastPageFetched,u=t.orderBy,s=t.perPage;if(r&&!(a>n)){var l=a+1,c=f.Observable.defer(function(){return r(l,s,u).then(h.toJson)}).retry(3).take(1);this.fetchSubscription=c.subscribe(function(t){e.trackPageView(),i.addPhotosToPhotoFeed(t),i.updatePhotoFeed({lastPageFetched:l})},function(e){o.captureException(e,{tags:{component:"Feed"}})})}}},{key:"trackPageView",value:function(){var e=this.props.location;window.ga("send","pageview",e.pathname)}},{key:"renderGrid",value:function(){var e=this.props,t=e.windowWidth,r=e.preferredGrid,n="multi"===r&&!(0,m.isPhone)(t);return n?this.renderMultiGrid():this.renderSingleGrid()}},{key:"renderMultiGrid",value:function(){var e=this.props,t=e.location,r=e.photos,n=e.authUser,o=e.windowWidth,i=e.pixelRatio,a=e.jsLoaded,u=e.actions,s=e.api;return p["default"].createElement(b["default"],{photos:r,location:t,authUser:n,windowWidth:o,pixelRatio:i,jsLoaded:a,actions:u,api:s})}},{key:"renderSingleGrid",value:function(){var e=this.props,t=e.location,r=e.photos,n=e.authUser,o=e.windowWidth,i=e.contentWidth,a=e.pixelRatio,u=e.actions,s=e.api;return p["default"].createElement(g["default"],{photos:r,location:t,authUser:n,windowWidth:o,contentWidth:i,pixelRatio:a,actions:u,api:s})}},{key:"renderSpinner",value:function(){var e=this.props,t=e.maxPage,r=e.lastPageFetched;return t>r?p["default"].createElement(_["default"],null):void 0}},{key:"renderEndContent",value:function(){var e=this.props,t=e.maxPage,r=e.endContent,n=e.lastPageFetched;return n>=t?r:void 0}},{key:"render",value:function(){var e=this.props,t=e.showPlaceholder,r=e.preferredGrid;return t?p["default"].createElement(E["default"],{preferredGrid:r}):p["default"].createElement("div",null,p["default"].createElement("div",{ref:"Container",className:"container"},this.renderGrid(),this.renderSpinner(),this.renderEndContent()))}}]),t}(d.Component);t["default"]=O,O.displayName=T,O.propTypes=j,O.defaultProps=k,O.contextTypes={router:p["default"].PropTypes.object.isRequired,setContentWidth:p["default"].PropTypes.func.isRequired}},906:function(e,t,r){"use strict";e.exports=r(907)},907:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(197),a=n(i),u=r(608),s=n(u),l=r(603),c=n(l),d=r(600),p=n(d),f=r(604),h=n(f),m=r(908),y=n(m),b=(0,s["default"])((0,c["default"])("FeedPlaceholder"),(0,p["default"])({preferredGrid:i.PropTypes.string}),(0,h["default"])({preferredGrid:"single"})),v={single:2,multi:9};t["default"]=b(function(e){var t=e.preferredGrid,r="multi"===t,n=[].concat(o(Array(v[t]).keys()));return a["default"].createElement("div",{className:y["default"].container},n.map(function(e,t){return a["default"].createElement("div",{key:t,className:r?y["default"].thirdContainer:y["default"].singleContainer},a["default"].createElement("div",{className:r?y["default"].third:y["default"].single}),r?null:a["default"].createElement("div",{className:y["default"].photoInfo},a["default"].createElement("div",{className:y["default"].leftActions},a["default"].createElement("div",{className:y["default"].likeButtonPlaceholder}),a["default"].createElement("div",{className:y["default"].addToCollectionButtonPlaceholder})),a["default"].createElement("div",{className:y["default"].user},a["default"].createElement("div",{className:y["default"].userPlaceholder})),a["default"].createElement("div",{className:y["default"].rightActions},a["default"].createElement("div",{className:y["default"].downloadButtonPlaceholder}))))}))})},908:function(e,t){e.exports={container:"_1IQJa _1iK9o _3vG8-",singleContainer:"_3Eie_ _13jTO CTQC5 _1vc38",thirdContainer:"_1ulF9 _13jTO _3kobr _2axTb _1vc38",single:"_80hLe",third:"_1YEV-",placeholderAnimationation:"_3e7kz",photoInfo:"_2UiKr",leftActions:"OJ6Md _3YIV2",user:"_2dxDA",rightActions:"Z8ES6 tPMQE",userPlaceholder:"_3WZQi",likeButtonPlaceholder:"_2b_eh",addToCollectionButtonPlaceholder:"_3WdH3",downloadButtonPlaceholder:"_2oX-1"}},909:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.meta=[{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@unsplash"},{name:"twitter:title",content:"Unsplash | Free High Resolution Photos"},{name:"twitter:description",content:"Do-whatever-you-want high-resolution photos."},{name:"og:title",content:"Unsplash | Free High Resolution Photos"},{name:"og:description",content:"Do-whatever-you-want high-resolution photos."},{name:"og:url",content:"https://unsplash.com/"},{name:"og:type",content:"website"},{rel:"canonical",href:"https://unsplash.com/"}]}});
//# sourceMappingURL=1.85fcb.main.js.map